{"version":3,"file":"static/js/444.90981654.chunk.js","mappings":"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","sources":["views/library/BookForm.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport PropTypes from 'prop-types'\n\nimport { CForm, CFormInput, CFormLabel, CButton, CFormCheck, CRow, CCol, CCard, CCardImage, CCardBody, CCardTitle, CCardText, CCardHeader } from '@coreui/react'\n\nimport {addDoc, collection, getFirestore, serverTimestamp, handle} from 'firebase/firestore'\nimport {useAuth} from '../../AuthProvider'\n\nconst BookForm = (props) => {\n  const [inputs, setInputs] = useState({title:'', author:''})\n  const [results, setResults] = useState()\n  const [toggle, setToggle] = useState(false)\n  const {user} = useAuth()\n\n  useEffect(() => {\n    console.log(results)\n  }, [toggle])\n\n  const inputHandler = (e) => {\n    const {value, name} = e.target\n    setInputs({...inputs, [name]:value})\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    try {\n      const data = await fetch(`https://www.googleapis.com/books/v1/volumes?q=intitle:${inputs.title}+inauthor:${inputs.author}&maxResults=6&key=AIzaSyDdLcE2Enx_RB7CWjS_QUBGECZPt0pf_VA`)\n      const request = await data.json()\n      setResults(request.items)\n    } catch (e) {\n      console.error('Error adding document: ', e);\n    }\n    setToggle(true)\n    setInputs({title:'', author:''})\n  }\n\n  const addBook = async (data, path) => {\n    try {\n      const shelf = await addDoc(collection(getFirestore(), \"library\"),{\n        title: data.volumeInfo.title,\n        author: data.volumeInfo.authors,\n        image: data.volumeInfo.imageLinks.smallThumbnail,\n        published: data.volumeInfo.publishedDate,\n        category: data.volumeInfo.categories[0],\n        user: user.userName,\n        book: data\n      });\n      const subShelf = await addDoc(collection(getFirestore(), path),{\n        title: data.volumeInfo.title,\n        author: data.volumeInfo.authors,\n        image: data.volumeInfo.imageLinks.smallThumbnail,\n        published: data.volumeInfo.publishedDate,\n        category: data.volumeInfo.categories[0],\n        user: user.userName,\n      });\n      console.log('Document written with ID: ', shelf.id);\n      navigate('/library')\n    } catch {\n      console.error('Error adding document: ');\n    }\n    setToggle(false)\n  }\n\n  // <CCardImage orientation=\"top\" src={book.volumeInfo.imageLinks.thumbnail || }/>\n\n\n  return (\n    <>\n      <CForm onSubmit={submitHandler}>\n        <div className=\"mb-3\">\n          <CFormLabel htmlFor=\"bookTitle\">Book Title</CFormLabel>\n          <CFormInput type=\"text\" name=\"title\" value={inputs.bookTitle} onChange={inputHandler}/>\n        </div>\n        <div className=\"mb-3\">\n          <CFormLabel htmlFor=\"bookAuthor\">Book Author</CFormLabel>\n          <CFormInput type=\"text\" name=\"author\" value={inputs.bookAuthor} onChange={inputHandler}/>\n        </div>\n        <CButton type=\"submit\" color=\"primary\" onClick={submitHandler}>\n          Search\n        </CButton>\n      </CForm>\n      {!!toggle &&\n        <>\n        <h2>Results</h2>\n          {results.map(book => (\n            <CCard className=\"mb-3\" style={{ maxWidth: '540px' }} key={book.id}>\n              <CRow className=\"g-0\">\n                <CCol md={4}>\n                </CCol>\n                <CCol md={8}>\n                  <CCardBody>\n                    <CCardTitle>{book.volumeInfo.title} by {book.volumeInfo.authors}</CCardTitle>\n                    <CCardText>\n                      Published {book.volumeInfo.publishedDate}\n                    </CCardText>\n                  </CCardBody>\n                    <CButton onClick={() => addBook(book, 'reading')}>Add to Reading</CButton>\n                    <CButton onClick={() => addBook(book, 'stack')}>Add to Stack</CButton>\n                </CCol>\n              </CRow>\n            </CCard>\n          ))}\n        </>\n      }\n    </>\n  )\n}\n\nexport default BookForm\n"],"names":["props","useState","title","author","inputs","setInputs","results","setResults","toggle","setToggle","user","useAuth","useEffect","console","log","inputHandler","e","target","value","name","submitHandler","preventDefault","fetch","data","json","request","items","error","addBook","path","addDoc","collection","getFirestore","volumeInfo","authors","image","imageLinks","smallThumbnail","published","publishedDate","category","categories","userName","book","shelf","id","navigate","onSubmit","className","htmlFor","type","bookTitle","onChange","bookAuthor","color","onClick","map","style","maxWidth","md"],"sourceRoot":""}