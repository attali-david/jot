{"version":3,"file":"static/js/807.e89020f6.chunk.js","mappings":"ofAsCMA,EAAU,WACb,IAAMC,EAAO,IAAIC,KAEjB,SAASC,EAAaC,GACpB,OAAOA,EAAIC,WAAWC,SAAS,EAAG,KAGpC,IAAMC,EAAON,EAAKO,cAIlB,MAAO,CAHOL,EAAaF,EAAKQ,WAAa,GACjCN,EAAaF,EAAKS,WAEVH,GAAMI,KAAK,QAsFlC,UAlFe,SAACC,IACCC,EAAAA,EAAAA,MAARC,KAAP,IACA,GAA0BC,EAAAA,EAAAA,UAAS,CAACC,MAAM,GAAIC,UAAU,KAAxD,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAgCJ,EAAAA,EAAAA,UAAS,IAAzC,eACMK,GADN,WACiBC,EAAAA,EAAAA,OACXC,GAAWC,EAAAA,EAAAA,OAkBjBC,EAAAA,EAAAA,YAAU,WACRL,GAAS,kBAAID,GAAL,IAAYD,UAAWjB,SAC9B,IAED,IASMyB,EAAa,mCAAG,wGAMGC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,KAAWC,EAAAA,EAAAA,MAAgB,WAAjB,UAAgCN,EAASO,MAAMC,IAAM,WAAW,CACpGC,KAAMb,EAAMF,MACZgB,UAAWd,EAAMD,UACjBgB,QAASX,EAASO,MAAMK,MACxBpB,KAAMQ,EAASO,MAAMf,OAVL,6DAalBqB,QAAQC,MAAM,UAAd,MAbkB,OAepBhB,EAAS,YAAD,OAAaE,EAASO,MAAMC,KAfhB,yDAAH,qDAsBrB,OACI,UAAC,KAAD,CACEO,UAAU,UACVC,UAAU,6DAFZ,WAIA,UAAC,KAAD,CAAaA,UAAU,iDAAvB,UACKpB,EAAMD,WACP,SAAC,KAAD,CAAcsB,QAXD,WACnBnB,GAAU,EAAG,CAAEoB,SAAS,WAYlB,SAAC,IAAD,CACAC,IAAI,WACJC,OA9DS,CACbC,eAAgB,CACd,SAAY,CACR,QAAW,CAAC,cAAe,cAAe,aAAc,aAAc,aACtEC,eAAgB,GAEpB,SAAY,CACR,QAAW,CAAC,OAAQ,SAAU,YAAa,gBAAiB,YAAa,cAAe,aAAc,WAAY,YAAa,kBAAmB,cAAe,cAAe,kBAAmB,YAAa,cAAe,iBAAkB,aAAc,eAAgB,WAAY,WAAY,kBAAmB,iBAAkB,aAAc,UAAW,SAAU,SAC/WA,eAAgB,IAGtBC,WAAW,EACXC,gBAAiB,uBACjBC,aAAa,GAkDT/B,MAAOE,EAAMF,MACbgC,cA5CoB,SAAChC,GACzBG,GAAS,kBAAID,GAAL,IAAYF,MAAOA,SA6CzB,SAAC,KAAD,CAAasB,UAAU,gDAAvB,UACI,SAAC,KAAD,CAASW,MAAM,UAAUX,UAAU,UAAUC,QAASd,EAAtD","sources":["views/journal/Editor.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom';\nimport { useNavigate, useLocation } from 'react-router-dom'\n\nimport {getFirestore, addDoc, collection } from 'firebase/firestore'\n\nimport { CRow, CCol, CCard, CCardHeader, CButton, CCardFooter, CCloseButton, CListGroup, CListGroupItem } from '@coreui/react'\n\n// Require Editor JS files.\nimport 'froala-editor/js/froala_editor.pkgd.min.js';\n\n// Require Editor CSS files.\nimport 'froala-editor/css/froala_style.min.css';\nimport 'froala-editor/css/froala_editor.pkgd.min.css';\n\nimport  'froala-editor/js/plugins/image.min.js';\nimport  'froala-editor/js/plugins/video.min.js';\nimport  'froala-editor/js/plugins/colors.min.js';\nimport  'froala-editor/js/plugins/emoticons.min.js';\nimport  'froala-editor/js/plugins/font_family.min.js';\nimport  'froala-editor/js/plugins/font_size.min.js';\nimport  'froala-editor/js/plugins/line_height.min.js';\nimport  'froala-editor/js/plugins/lists.min.js';\nimport  'froala-editor/js/plugins/align.min.js';\nimport  'froala-editor/js/plugins/link.min.js';\nimport  'froala-editor/js/plugins/file.min.js';\nimport 'froala-editor/css/plugins/image.min.css';\nimport 'froala-editor/css/plugins/video.min.css';\nimport 'froala-editor/css/plugins/colors.min.css';\nimport 'froala-editor/css/plugins/emoticons.min.css';\nimport 'froala-editor/css/plugins/file.min.css';\n\nimport FroalaEditor from 'react-froala-wysiwyg';\n\nimport {useAuth} from '../../AuthProvider'\n\n\nconst getTime = () => {\n   const date = new Date();\n\n   function padTo2Digits(num) {\n     return num.toString().padStart(2, '0');\n   }\n\n   const year = date.getFullYear();\n   const month = padTo2Digits(date.getMonth() + 1);\n   const day = padTo2Digits(date.getDate());\n\n   return [month, day, year].join(' / ');\n}\n\n\nconst Editor = (props) => {\n  const {user} = useAuth()\n  const [input, setInput] = useState({model:'', timestamp:''})\n  const [hashtags, setHashtags] = useState([])\n  const navigate = useNavigate()\n  const location = useLocation()\n\n  const settings = {\n      toolbarButtons: {\n        'moreRich': {\n            'buttons': ['insertImage', 'insertVideo', 'insertLink', 'insertFile', 'emoticons'],\n            buttonsVisible: 5\n          },\n        'moreText': {\n            'buttons': ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', 'textColor', 'backgroundColor', 'inlineClass', 'inlineStyle', 'clearFormatting', 'alignLeft', 'alignCenter', 'formatOLSimple', 'alignRight', 'alignJustify', 'formatOL', 'formatUL', 'paragraphFormat', 'paragraphStyle', 'lineHeight', 'outdent', 'indent', 'quote'],\n            buttonsVisible: 0\n          }\n      },\n      autofocus: true,\n      placeholderText: \"What's on your mind?\",\n      attribution: false,\n    };\n\n  useEffect(() => {\n    setInput({...input, timestamp: getTime()})\n  }, [])\n\n    const handleModelChange = (model) => {\n      setInput({...input, model: model})\n      // setHashtags([...input.model.matchAll(/#\\w+/g)].map(match => (\n      //   match[0]\n      // )))\n      // console.log(hashtags)\n      // const replace = input.model.replaceAll(regex, `<span style=\"background-color: rgb(147, 101, 184); color: rgb(239, 239, 239);\">$&</span>`)\n    }\n\n    const submitHandler = async () => {\n      // hashtags.forEach(match => (\n      //   setInput({tags:{...input.tags, match:true}})\n      //   console.log(input.tags)\n      // ))\n      try {\n        const docRef = await addDoc(collection(getFirestore(), \"journals\", `${location.state.id}`, \"entries\"),{\n          text: input.model,\n          entryDate: input.timestamp,\n          journal: location.state.title,\n          user: location.state.user\n        })\n      } catch (e) {\n        console.error('Error: ', e)\n      }\n      navigate(`/journal/${location.state.id}`)\n    }\n\n  const closeHandler = () => {\n    navigate(-1, { replace: true })\n  }\n\n  return (\n      <CCard\n        textColor='primary'\n        className=\"mw-75 h-100 border-primary border-top-primary border-top-3\"\n      >\n      <CCardHeader className=\"d-grid gap-2 d-md-flex justify-content-between\">\n          {input.timestamp}\n          <CCloseButton onClick={closeHandler}/>\n      </CCardHeader>\n          <FroalaEditor\n          tag='textarea'\n          config={settings}\n          model={input.model}\n          onModelChange={handleModelChange}\n          />\n        <CCardFooter className=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n            <CButton color=\"primary\" className=\"me-md-2\" onClick={submitHandler}>\n              Save\n            </CButton>\n        </CCardFooter>\n      </CCard>\n  )\n}\n\nexport default Editor\n"],"names":["getTime","date","Date","padTo2Digits","num","toString","padStart","year","getFullYear","getMonth","getDate","join","props","useAuth","user","useState","model","timestamp","input","setInput","navigate","useNavigate","location","useLocation","useEffect","submitHandler","addDoc","collection","getFirestore","state","id","text","entryDate","journal","title","console","error","textColor","className","onClick","replace","tag","config","toolbarButtons","buttonsVisible","autofocus","placeholderText","attribution","onModelChange","color"],"sourceRoot":""}